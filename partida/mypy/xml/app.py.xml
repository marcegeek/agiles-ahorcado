<?xml-stylesheet type="text/xsl" href="../mypy-html.xslt"?><mypy-report-file name="app.py" module="app"><line any_info="No Anys on this line!" content="from flask import Flask, flash, render_template, request, redirect, url_for, session" number="1" precision="precise"/><line any_info="No Anys on this line!" content="from juego import Juego, Partida" number="2" precision="precise"/><line any_info="No Anys on this line!" content="" number="3" precision="empty"/><line any_info="No Anys on this line!" content="app = Flask(__name__)" number="4" precision="precise"/><line any_info="No Anys on this line!" content="app.secret_key = 'tu_clave_secreta'" number="5" precision="precise"/><line any_info="No Anys on this line!" content="" number="6" precision="empty"/><line any_info="No Anys on this line!" content="" number="7" precision="empty"/><line any_info="Any Types on this line: &#10;Omitted Generics (x4)&#10;Explicit (x1)" content="@app.route('/')" number="8" precision="precise"/><line any_info="No Anys on this line!" content="def index():" number="9" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="    return render_template('index.html')" number="10" precision="any"/><line any_info="No Anys on this line!" content="" number="11" precision="empty"/><line any_info="No Anys on this line!" content="" number="12" precision="empty"/><line any_info="No Anys on this line!" content="def iniciar_juego():" number="13" precision="any"/><line any_info="No Anys on this line!" content="    palabra = request.form['palabra']" number="14" precision="any"/><line any_info="No Anys on this line!" content="    try:" number="15" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        juego = Juego(palabra=palabra)" number="16" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        session['juego'] = juego.to_dict()" number="17" precision="any"/><line any_info="No Anys on this line!" content="    except ValueError as e:" number="18" precision="precise"/><line any_info="No Anys on this line!" content="        flash(str(e), category='error')" number="19" precision="any"/><line any_info="No Anys on this line!" content="" number="20" precision="empty"/><line any_info="No Anys on this line!" content="" number="21" precision="empty"/><line any_info="No Anys on this line!" content="def arriesgar(juego):" number="22" precision="any"/><line any_info="No Anys on this line!" content="    intento = request.form['intento']" number="23" precision="any"/><line any_info="No Anys on this line!" content="    if len(intento) == 1:" number="24" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        resultado = juego.arriesgarLetra(intento)" number="25" precision="any"/><line any_info="No Anys on this line!" content="    else:" number="26" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        resultado = juego.arriesgarPalabra(intento)" number="27" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="    return resultado" number="28" precision="any"/><line any_info="No Anys on this line!" content="" number="29" precision="empty"/><line any_info="No Anys on this line!" content="" number="30" precision="empty"/><line any_info="Any Types on this line: &#10;Omitted Generics (x4)&#10;Explicit (x1)" content="@app.route('/juego', methods=['GET', 'POST'])" number="31" precision="any"/><line any_info="No Anys on this line!" content="def juego():" number="32" precision="any"/><line any_info="No Anys on this line!" content="    if 'juego' not in session:" number="33" precision="any"/><line any_info="No Anys on this line!" content="        if request.method == 'POST':" number="34" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            iniciar_juego()" number="35" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="            return redirect(url_for('juego'))" number="36" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        return render_template('juego-inicio.html')" number="37" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Error (x1)" content="    juego = Juego(data=session['juego'])" number="38" precision="any"/><line any_info="No Anys on this line!" content="    resultado = None" number="39" precision="any"/><line any_info="No Anys on this line!" content="    if request.method == 'POST':" number="40" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        resultado = arriesgar(juego)" number="41" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        session['juego'] = juego.to_dict()" number="42" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Unannotated (x1)" content="    return render_template('juego.html', juego=juego, resultado=resultado)" number="43" precision="any"/><line any_info="No Anys on this line!" content="" number="44" precision="empty"/><line any_info="No Anys on this line!" content="" number="45" precision="empty"/><line any_info="No Anys on this line!" content="def url_redireccion(fallback=None):" number="46" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="    if fallback is None:" number="47" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Unannotated (x1)" content="        fallback = url_for('index')" number="48" precision="any"/><line any_info="Any Types on this line: &#10;Omitted Generics (x5)&#10;Unannotated (x2)" content="    redirecciones = request.values.get('redirect_to'), request.referrer, fallback" number="49" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="    return [r for r in redirecciones if r][0]" number="50" precision="any"/><line any_info="No Anys on this line!" content="" number="51" precision="empty"/><line any_info="No Anys on this line!" content="" number="52" precision="empty"/><line any_info="Any Types on this line: &#10;Omitted Generics (x4)&#10;Explicit (x1)" content="@app.route('/finalizar', methods=['POST'])" number="53" precision="any"/><line any_info="No Anys on this line!" content="def finalizar():" number="54" precision="any"/><line any_info="Any Types on this line: &#10;Error (x8)&#10;Omitted Generics (x2)" content="    session.pop('juego', None)" number="55" precision="any"/><line any_info="Any Types on this line: &#10;Error (x8)&#10;Omitted Generics (x2)" content="    session.pop('jugadores', None)" number="56" precision="any"/><line any_info="Any Types on this line: &#10;Error (x8)&#10;Omitted Generics (x2)" content="    session.pop('partida', None)" number="57" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="    return redirect(url_redireccion())" number="58" precision="any"/><line any_info="No Anys on this line!" content="" number="59" precision="empty"/><line any_info="No Anys on this line!" content="" number="60" precision="empty"/><line any_info="No Anys on this line!" content="def iniciar_partida():" number="61" precision="any"/><line any_info="No Anys on this line!" content="    keys = ['jugador1', 'jugador2']" number="62" precision="any"/><line any_info="No Anys on this line!" content="    session['jugadores'] = [request.form[k] for k in keys]" number="63" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="    p = Partida()" number="64" precision="precise"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="    session['partida'] = p.to_dict()" number="65" precision="any"/><line any_info="No Anys on this line!" content="" number="66" precision="empty"/><line any_info="No Anys on this line!" content="" number="67" precision="empty"/><line any_info="No Anys on this line!" content="def iniciar_ronda(partida):" number="68" precision="any"/><line any_info="No Anys on this line!" content="    palabra = request.form['palabra']" number="69" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="    partida.comenzarRonda(palabra)" number="70" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="    session['partida'] = partida.to_dict()" number="71" precision="any"/><line any_info="No Anys on this line!" content="" number="72" precision="empty"/><line any_info="No Anys on this line!" content="" number="73" precision="empty"/><line any_info="Any Types on this line: &#10;Omitted Generics (x4)&#10;Explicit (x1)" content="@app.route('/partida', methods=['GET', 'POST'])" number="74" precision="any"/><line any_info="No Anys on this line!" content="def partida():" number="75" precision="any"/><line any_info="Any Types on this line: &#10;Error (x7)&#10;Omitted Generics (x2)" content="    jugadores = session.get('jugadores')" number="76" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Error (x1)" content="    partida = Partida(data=session['partida']) if 'partida' in session else None" number="77" precision="any"/><line any_info="No Anys on this line!" content="    if not partida:" number="78" precision="precise"/><line any_info="No Anys on this line!" content="        if request.method == 'POST':" number="79" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            iniciar_partida()" number="80" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="            return redirect(url_for('partida'))" number="81" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Error (x1)" content="        return render_template('partida-inicio.html', jugadores=jugadores, partida=partida)" number="82" precision="any"/><line any_info="No Anys on this line!" content="" number="83" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="    iniciar_ronda = partida.idJugadorActual is None or partida.rondaFinalizo()" number="84" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="    jugador_palabra = 0 if partida.idJugadorActual is None else partida.idJugadorActual" number="85" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="    jugador_adivina = (jugador_palabra + 1) % 2" number="86" precision="any"/><line any_info="No Anys on this line!" content="    if request.method == 'POST':" number="87" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        if not partida.finalizo():" number="88" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            if iniciar_ronda:" number="89" precision="imprecise"/><line any_info="Any Types on this line: &#10;Error (x1)&#10;Unannotated (x1)" content="                iniciar_ronda(partida)" number="90" precision="any"/><line any_info="No Anys on this line!" content="            else:" number="91" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                arriesgar(partida.juego)" number="92" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                partida.actualizarPuntos()" number="93" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                session['partida'] = partida.to_dict()" number="94" precision="any"/><line any_info="No Anys on this line!" content="        else:" number="95" precision="empty"/><line any_info="No Anys on this line!" content="            flash('La partida ya finalizó', category='error')" number="96" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        return redirect(url_for('partida'))" number="97" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Error (x1)&#10;Unannotated (x1)" content="    return render_template('partida.html', jugadores=jugadores, partida=partida, iniciar_ronda=iniciar_ronda," number="98" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                           jugador_palabra=jugador_palabra, jugador_adivina=jugador_adivina)" number="99" precision="any"/><line any_info="No Anys on this line!" content="" number="100" precision="empty"/><line any_info="No Anys on this line!" content="" number="101" precision="empty"/><line any_info="No Anys on this line!" content="if __name__ == '__main__':" number="102" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="    app.run(debug=True)" number="103" precision="precise"/></mypy-report-file>